{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Honeybee Bakehouse â€” Cupcakes & Cookies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Open Graph -->
    <meta property="og:title" content="Honeybee Bakehouse â€” Cupcakes & Cookies" />
    <meta property="og:description" content="Order small-batch cupcakes & cookies. Join the Southern Sweets Club for 6 FREE snickerdoodles." />
    <meta property="og:type" content="website" />
    <!-- Absolute URL for previews -->
    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'img/logo.png' %}" />

    <style>
      .container{max-width:1100px;margin:0 auto;padding:16px}
      .flavor-guide{width:100%;height:auto;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,.12)}
      .audio-gate{position:fixed;inset:auto 16px 16px auto;background:#fff8e1;border:1px solid #f5d36b;border-radius:999px;padding:10px 14px;box-shadow:0 4px 14px rgba(0,0,0,.12);display:flex;gap:10px;align-items:center}
      .hidden{display:none}
      .btn{cursor:pointer;border:none;border-radius:999px;padding:8px 14px;background:#222;color:#fff;font-weight:600}
      .btn:focus{outline:2px solid #f5d36b;outline-offset:2px}
    </style>
  </head>

  <body>
    <div class="container">
      <!-- Hero / headline etc. -->

      <!-- Flavor Guide shows immediately on page load -->
      <figure style="margin:24px 0">
        <img
          class="flavor-guide"
          src="{% static 'docs/flavor-guide.jpg' %}"
          alt="Honeybee Bakehouse Flavor Guide"
          loading="eager"
          fetchpriority="high"
        />
        <figcaption style="font-size:.9rem;color:#555;margin-top:8px">
          Our current flavors at a glance.
        </figcaption>
      </figure>
    </div>

    <!-- Theme music -->
    <audio id="theme" src="{% static 'audio/theme.mp3' %}" preload="auto"></audio>

    <!-- Autoplay fallback (shown only if browser blocks autoplay with sound) -->
    <div id="audio-gate" class="audio-gate hidden" role="dialog" aria-live="polite">
      ðŸŽµ Want music?
      <button id="playBtn" class="btn" type="button">Play theme</button>
    </div>

    <script>
      // Try to play on load; if blocked, show a one-click Play button.
      document.addEventListener('DOMContentLoaded', async () => {
        const audio = document.getElementById('theme');
        const gate  = document.getElementById('audio-gate');
        try {
          await audio.play(); // Many browsers will block this if not muted/user-initiated
        } catch (err) {
          gate.classList.remove('hidden');
          document.getElementById('playBtn').addEventListener('click', async () => {
            try {
              await audio.play();
              gate.classList.add('hidden');
            } catch (e) {
              // keep the button visible if it still fails
              console.warn(e);
            }
          });
        }
      });
    </script>
  </body>
</html>
