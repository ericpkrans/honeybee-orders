{% load static %}
{% static 'img/logo-v2.png' as logo_path %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Honeybee Bakehouse ‚Äî Cupcakes & Cookies</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Open Graph -->
  <meta property="og:title" content="Honeybee Bakehouse ‚Äî Cupcakes & Cookies" />
  <meta property="og:description" content="Southern cupcakes & cookies made from scratch in Bellevue, Nebraska." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ logo_path }}" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg:#d9d9d9;
      --ink:#1f1b16;
      --order:#a3c1ad;
      --club:#7393B3;
      --sky:#7AA6D6;
      --card:#ffffff;
      --ink-soft:#3a332b;
      --border:rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    html,body {
      margin:0; padding:0;
      background:var(--bg); color:var(--ink);
      font-family:"Quicksand", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }
    .wrap { max-width:960px; margin:0 auto; padding:24px; }

    /* Header */
    header { display:flex; flex-direction:column; align-items:center; gap:10px; margin-top:8px; text-align:center; }
    header img { width:140px; height:auto; filter: drop-shadow(0 2px 0 rgba(0,0,0,.05)); }
    .headline { font-size:clamp(28px,4.6vw,46px); line-height:1.08; margin:6px 0 0; }
    .sub { margin:6px 0 0; font-size:1.08rem; color:var(--ink-soft); }

    /* CTAs & Buttons */
    .cta { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin:22px 0; }
    .btn {
      border:none; border-radius:999px; padding:.9rem 1.25rem; font-weight:700;
      cursor:pointer; text-decoration:none; color:var(--ink); background:var(--card);
      box-shadow:0 2px 0 rgba(0,0,0,.08);
    }
    .btn:hover { transform:translateY(-1px); }
    .btn.order { background:var(--order); color:#0f1b14; }
    .btn.club { background:var(--club); color:#fff; }
    .btn.download { background:#fff; border:1px solid #cbbf88; }

    /* Panels */
    .panel {
      background:var(--card); border-radius:16px; padding:18px; box-shadow:0 4px 0 var(--border);
      margin:18px 0; display:flex; flex-direction:column; gap:8px;
    }
    .panel h2 { margin:.2rem 0 4px 0; }
    .muted { color:#6a5f54; }

    /* Two-column row (equal height on desktop) */
    .grid { display:grid; grid-template-columns:1fr; gap:16px; }
    @media (min-width:900px){
      .grid { grid-template-columns:2fr 1fr; align-items:stretch; }
      .grid > * { display:flex; }
      .grid > * > .panel { height:100%; }
    }

    /* Music panel: full width, centered; shrinks & sticks after play */
    .music-panel {
      width:100%;
      background:var(--sky);
      color:white;
      padding:10px 14px;
      border-radius:12px;
      text-align:center;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 2px 0 rgba(0,0,0,.08);
      margin:0 0 16px 0;
      display:flex; align-items:center; justify-content:center;
      transition:all .25s ease;
      user-select:none;
    }
    .music-panel:hover { background:#5d8ec0; }
    .music-panel.minimized {
      padding:6px 12px;
      font-size:.95rem;
      opacity:.96;
      margin-bottom:10px;
      border-radius:999px;
      width:max-content;         /* shrink to content */
      position:sticky;           /* stick under top on scroll */
      top:8px;
      left:0; right:0;
      margin-left:auto; margin-right:auto;  /* keep centered */
      z-index:50;
      box-shadow:0 6px 20px rgba(0,0,0,.12);
    }

    /* Images */
    .flavor-guide { max-width:100%; height:auto; border-radius:8px; box-shadow:0 6px 24px rgba(0,0,0,.08); }

    /* Facebook button */
    .btn.icon { display:inline-flex; align-items:center; gap:8px; line-height:1; padding:.75rem 1rem; }
    .btn.fb { background:#1877F2; color:#fff; }
    .btn.fb svg { width:18px; height:18px; display:block; }

    /* Lists */
    ul.clean { margin:8px 0 0 0; padding-left:1.1rem; }
    ul.clean li { margin:.35rem 0; }
    .kicker { font-weight:700; }

    footer { margin:26px 0; text-align:center; font-size:.95rem; color:#5b5146; }

    /* Center Follow Along content vertically */
    .follow-content {
      flex:1;
      display:flex;
      flex-direction:column;
      justify-content:center;
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Music panel (click to play/pause; shrinks & sticks after first play) -->
    <div id="musicPanel" class="music-panel" role="button" tabindex="0" aria-live="polite" aria-label="Click to listen to our song">
      üéµ Click to listen to our song
    </div>

    <header>
      <img src="{% static 'img/logo-v2.png' %}" alt="Honeybee Bakehouse logo" loading="eager" fetchpriority="high">
      <h1 class="headline">Welcome to the Honeybee Bakehouse</h1>
      <p class="sub">Southern cupcakes & cookies made from scratch in Bellevue, Nebraska.</p>
    </header>

    <div class="cta">
      <a class="btn order" href="{% url 'home' %}">Order Now</a>
      <a class="btn club" href="{% url 'rewards' %}">Join Southern Sweets Club</a>
    </div>

    <section class="panel">
      <h2>A Taste of Home</h2>
      <p>Hey y‚Äôall, I‚Äôm Kelly‚Äîa mama of five with a heart full of faith, a home full of love, and an oven always ready to share something sweet. At Honeybee Bakehouse, everything‚Äôs homemade with love (and a little sass), right here in my country kitchen. I use local ingredients, bake in small batches, and keep things simple and sweet.</p>
      <p class="kicker">Why folks love Honeybee Bakehouse:</p>
      <ul class="clean">
        <li>Whipped cream cheese <strong>icing</strong> (less sugar, better flavor)</li>
        <li>I sell icing by the tub</li>
        <li>Seasonal and holiday flavors</li>
        <li>Optional filled cupcakes <em>‚Äî filling is FREE for military families</em></li>
        <li>Affordable pricing‚Äîno storefront overhead!</li>
        <li>Just a 3-day heads up to place your order</li>
      </ul>
    </section>

    <div class="grid">
      <!-- LEFT: Flavor Guide -->
      <div>
        <section class="panel">
          <h2>Flavor Guide</h2>
          <p class="muted">Browse our seasonal lineup and classics.</p>
          <img class="flavor-guide" src="{% static 'docs/flavor-guide.jpg' %}" alt="Honeybee Bakehouse Flavor Guide" loading="eager" fetchpriority="high">
          <div class="cta" style="margin-top:12px">
            <a class="btn order" href="{% url 'home' %}">Order Now</a>
            <a class="btn download" href="{% static 'docs/flavor-guide.jpg' %}" download="Honeybee-Flavor-Guide.jpg" aria-label="Download the Honeybee Bakehouse Flavor Guide as a JPG">‚¨áÔ∏è Download flavor guide</a>
          </div>
        </section>
      </div>

      <!-- RIGHT: Follow Along (centered) -->
      <div>
        <aside class="panel">
          <div class="follow-content">
            <h2>Follow Along</h2>
            <p class="muted" style="margin-top:4px">Weekly flavors, behind-the-scenes, and giveaways.</p>
            <div style="margin-top:10px">
              <a class="btn icon fb" href="https://www.facebook.com/profile.php?id=61576102571602" target="_blank" rel="noopener">
                <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" fill="currentColor">
                  <path d="M22 12.06C22 6.48 17.52 2 11.94 2S2 6.48 2 12.06c0 5.01 3.66 9.16 8.44 9.94v-7.03H7.9V12.1h2.54V9.86c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.24.2 2.24.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.9h2.78l-.44 2.87h-2.34v7.03C18.34 21.22 22 17.07 22 12.06z"/>
                </svg>
                Open Facebook
              </a>
            </div>

            <div style="margin-top:16px;">
              <h3 style="margin:0; display:flex; align-items:center; gap:6px">
                Kind Words
                <span aria-hidden="true" style="color:#FFD700; font-size:1rem;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
              </h3>
              <blockquote class="muted" style="margin:8px 0">
                ‚ÄúI want to dive face first into a swimming pool filled with her icing.‚Äù ‚Äî <strong>Vicky C.</strong>
              </blockquote>
              <blockquote class="muted" style="margin:0">
                ‚ÄúThe icing is incredible. I‚Äôm never going back to store-bought.‚Äù ‚Äî <strong>Amanda G.</strong>
              </blockquote>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <footer>
      ¬© {% now "Y" %} Honeybee Bakehouse ‚Ä¢ Join the <strong>Southern Sweets Club</strong> for 6 free snickerdoodles
    </footer>
  </div>

  <audio id="theme" src="{% static 'audio/theme.mp3' %}" preload="auto" autoplay muted loop></audio>

  <script>
    const audio = document.getElementById('theme');
    const panel = document.getElementById('musicPanel');

    // Toggle play/pause + minimize & stick after first successful play
    let started = false;

    async function toggleMusic(){
      try {
        if (audio.muted || audio.paused) {
          audio.muted = false;
          await audio.play();
          panel.textContent = "üéµ Now playing ‚Äî tap to pause";
          panel.setAttribute('aria-label', 'Now playing ‚Äî tap to pause');
          if (!started) {
            panel.classList.add('minimized'); // shrink & sticky
            started = true;
          }
        } else {
          audio.pause();
          panel.textContent = "‚è∏Ô∏è Paused ‚Äî tap to resume";
          panel.setAttribute('aria-label', 'Paused ‚Äî tap to resume');
        }
      } catch(e) {
        // ignore autoplay errors (e.g., if user blocks media)
      }
    }

    panel.addEventListener('click', toggleMusic);
    panel.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleMusic(); }
    });
  </script>
</body>
</html>
